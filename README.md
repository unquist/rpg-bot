# rpg-bot

rpg-bot is a Slack chat bot built on the [Hubot][hubot] framework. It was
initially generated by [generator-hubot][generator-hubot], and configured to be
deployed on [Heroku][heroku] to get you up and running as quick as possible. You can find general instructions on how to setup a hubot instance at those pages.  We recommend following the specific instructions to setup a hubot instance using the [slack adapter][slack adapter]. 

Specific instructions for features unique to rpg-bot can be found below.

[heroku]: http://www.heroku.com
[hubot]: http://hubot.github.com
[generator-hubot]: https://github.com/github/generator-hubot
[slack adapter]: https://github.com/slackhq/hubot-slack/blob/master/README.md

##  Persistence

rpg-bot requires the `hubot-redis-brain` package for many of it's features. You will need to add the Redis to Go addon on Heroku which requires a verified account or you can create an account at [Redis to Go][redistogo] and manually set the `REDISTOGO_URL` variable.

    % heroku config:add REDISTOGO_URL="..."

[redistogo]: https://redistogo.com/

## Adapters

rpg-bot is designed to run with Slack. Make sure to run through the [slack adapter][slack adapter] configuration instructions. In particular, don't forget to confiugure the HUBOT_SLACK_TOKEN system variable.

[slack adapter]: https://github.com/slackhq/hubot-slack/blob/master/README.md

# rpg-bot specific configuration

## Roll command

To use rpg-bot's /roll command, you will need to create a new "Slash Command" integration at Slack.  The token defined there should be saved in an environment variable named "HUBOT_SLASH_ROLL_TOKEN".
```
export HUBOT_SLASH_ROLL_TOKEN=[your token here]
```
You can find instructions on how to use the /roll command with "/roll help" within slack.

## Campaign summarizer

rpg-bot can monitor a channel in which you're playing your campaign, stip out any meta conversation, and publish the results to a separate 'archive' channel.  The archive channel can then be read by the DM or players to get a summary of recent events (without the extraneous in-game chatter).

You'll need to setup three environment variables:

*RPGBOT_SUMMARIZE_INTERVAL*: The time in minutes between each run of the bot. Defaults to 0 which turns the summarizer off. We recommend setting this to a value of around 15.  That gives players a chance to edit any in-character messages, and shouldn't tax the system too much.

*RPGBOT_SUMMARY_CHANNEL_NAME*: Set this to the name of the channel you want the summaries posted to. Do not prefix the name with a "#" character.

*RPGBOT_CAMPAIGN_CHANNEL_NAME*: Set this to the name of the channel you want summarized. Do not prefix the name with a "#" character.
